{% extends "base.html" %}

{% block content %}
<h1>Beans</h1>
{% if beans %}
<div class="container-row">
    <div class="table-container">
        <table id="bean-info-table">
            <tr>
                <th>Name</th>
                <th>Stock</th>
            </tr>
            {% for bean in beans %}
            <tr>
                <td>
                    <a class="clickable-text" href="{% url "bean-details" bean.id %}">
                        {{ bean.name }}
                    </a>
                </td>
                <td>
                    <a class="clickable-text" href="{% url "stock-entries-detail" bean.id %}">
                        {% for stock_total in stock_totals %}
                        {% if stock_total.bean == bean %}
                        {% if stock_total.total_quantity < bean.reorder_trigger %}
                            <div class="low-stock">{{ stock_total.total_quantity }} kg</div>
                        {% else %}
                            {{ stock_total.total_quantity }} kg
                        {% endif %}
                        {% endif %}
                        {% endfor %}
                    </a>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div class="vertical-space"></div>
    <div class="chart-container">
        {{ chart|safe }}
    </div>
</div>
{% endif %}
{% endblock content %}